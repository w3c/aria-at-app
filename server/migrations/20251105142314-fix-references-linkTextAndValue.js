'use strict';

const { regenerateResultsAndRecalculateHashes, dumpTable } = require('./utils');
/** @type {import('sequelize-cli').Migration} */
module.exports = {
  async up(queryInterface, Sequelize) {
    /* prettier-ignore */
    const references = {
      /* eslint-disable */
      "accordion": { "author": { "refId": "author", "type": "metadata", "value": "Isabel Del Castillo", "linkText": "" }, "authorEmail": { "refId": "authorEmail", "type": "metadata", "value": "isa.delcastillo5@gmail.com", "linkText": "" }, "title": { "refId": "title", "type": "metadata", "value": "Accordion", "linkText": "" }, "reference": { "refId": "reference", "type": "metadata", "value": "reference/2025-5-5_135654/accordion.html", "linkText": "Test Case Page for Accordion Example" }, "designPattern": { "refId": "designPattern", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/accordion/", "linkText": "APG Pattern: Accordion" }, "example": { "refId": "example", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/accordion/examples/accordion/", "linkText": "APG Example: Accordion Example" }, "aria-expanded": { "refId": "aria-expanded", "type": "aria", "value": "aria-expanded", "linkText": "aria-expanded" }, "aria-labelledby": { "refId": "aria-labelledby", "type": "aria", "value": "aria-labelledby", "linkText": "aria-labelledby" }, "aria-required": { "refId": "aria-required", "type": "aria", "value": "aria-required", "linkText": "aria-required" }, "region": { "refId": "region", "type": "aria", "value": "region", "linkText": "region" }, "button": { "refId": "button", "type": "htmlAam", "value": "button", "linkText": "button" }, "heading": { "refId": "heading", "type": "htmlAam", "value": "heading", "linkText": "heading" }, "inputTypeText": { "refId": "inputTypeText", "type": "htmlAam", "value": "inputTypeText", "linkText": "inputTypeText" } },
      "alert": { "author": { "refId": "author", "type": "metadata", "value": "Isabel Del Castillo", "linkText": "" }, "authorEmail": { "refId": "authorEmail", "type": "metadata", "value": "isa.delcastillo5@gmail.com", "linkText": "" }, "title": { "refId": "title", "type": "metadata", "value": "Alert Example", "linkText": "" }, "reference": { "refId": "reference", "type": "metadata", "value": "reference/2022-4-8_144013/alert.html", "linkText": "Test Case Page for Alert Example" }, "designPattern": { "refId": "designPattern", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/alert/", "linkText": "APG Pattern: Alert" }, "example": { "refId": "example", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/alert/examples/alert/", "linkText": "APG Example: Alert" }, "alert": { "refId": "alert", "type": "aria", "value": "alert", "linkText": "alert" } },
      "checkbox": { "author": { "refId": "author", "type": "metadata", "value": "Isabel Del Castillo", "linkText": "" }, "authorEmail": { "refId": "authorEmail", "type": "metadata", "value": "isa.delcastillo5@gmail.com", "linkText": "" }, "title": { "refId": "title", "type": "metadata", "value": "Checkbox Example (Two State)", "linkText": "" }, "reference": { "refId": "reference", "type": "metadata", "value": "reference/2025-10-2_121011/checkbox.html", "linkText": "Test Case Page for Checkbox Example (Two State)" }, "designPattern": { "refId": "designPattern", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/checkbox/", "linkText": "APG Pattern: Checkbox" }, "example": { "refId": "example", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/checkbox/examples/checkbox/", "linkText": "APG Example: Checkbox Example (Two State)" }, "aria-checked": { "refId": "aria-checked", "type": "aria", "value": "aria-checked", "linkText": "aria-checked" }, "checkbox": { "refId": "checkbox", "type": "aria", "value": "Checkbox", "linkText": "checkbox" }, "group": { "refId": "group", "type": "aria", "value": "group", "linkText": "group" }, "aria-labelledby": { "refId": "aria-labelledby", "type": "aria", "value": "aria-labelledby", "linkText": "aria-labelledby" }, "list": { "refId": "list", "type": "htmlAam", "value": "list", "linkText": "list" } },
      "command-button": { "author": { "refId": "author", "type": "metadata", "value": "Isabel Del Castillo", "linkText": "" }, "authorEmail": { "refId": "authorEmail", "type": "metadata", "value": "isa.delcastillo5@gmail.com", "linkText": "" }, "title": { "refId": "title", "type": "metadata", "value": "Command Button Example", "linkText": "" }, "reference": { "refId": "reference", "type": "metadata", "value": "reference/2022-4-8_124112/button.html", "linkText": "Test Case Page for Command Button Example" }, "designPattern": { "refId": "designPattern", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/button/", "linkText": "APG Pattern: Button" }, "example": { "refId": "example", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/button/examples/button/", "linkText": "APG Example: Button" }, "button": { "refId": "button", "type": "aria", "value": "button", "linkText": "button" } },
      "disclosure-faq": { "author": { "refId": "author", "type": "metadata", "value": "James Scholes", "linkText": "" }, "authorEmail": { "refId": "authorEmail", "type": "metadata", "value": "james@pac.bz", "linkText": "" }, "title": { "refId": "title", "type": "metadata", "value": "Disclosure of Answers to Frequently Asked Questions Example", "linkText": "" }, "reference": { "refId": "reference", "type": "metadata", "value": "reference/2025-8-8_7334/disclosure-faq.html", "linkText": "Test Case Page for Disclosure of Answers to Frequently Asked Questions Example" }, "designPattern": { "refId": "designPattern", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/disclosure/", "linkText": "APG Pattern: Disclosure (Show/Hide)" }, "example": { "refId": "example", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/disclosure/examples/disclosure-faq/", "linkText": "APG Example: Disclosure (Show/Hide) for Answers to Frequently Asked Questions" }, "aria-expanded": { "refId": "aria-expanded", "type": "aria", "value": "aria-expanded", "linkText": "aria-expanded" }, "button": { "refId": "button", "type": "htmlAam", "value": "button", "linkText": "button" }, "div": { "refId": "div", "type": "htmlAam", "value": "div", "linkText": "div" }, "ul": { "refId": "ul", "type": "htmlAam", "value": "ul", "linkText": "ul" }, "generic": { "refId": "generic", "type": "aria", "value": "generic", "linkText": "generic" } },
      "disclosure-navigation": { "author": { "refId": "author", "type": "metadata", "value": "James Scholes", "linkText": "" }, "authorEmail": { "refId": "authorEmail", "type": "metadata", "value": "james@pac.bz", "linkText": "" }, "title": { "refId": "title", "type": "metadata", "value": "Disclosure Navigation Menu Example", "linkText": "" }, "reference": { "refId": "reference", "type": "metadata", "value": "reference/2022-9-9_13844/disclosure-navigation.html", "linkText": "Test Case Page for Disclosure Navigation Menu Example" }, "example": { "refId": "example", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/disclosure/examples/disclosure-navigation/", "linkText": "APG Example: Disclosure Navigation Menu" }, "button": { "refId": "button", "type": "htmlAam", "value": "button", "linkText": "button" }, "heading": { "refId": "heading", "type": "htmlAam", "value": "heading", "linkText": "heading" }, "ul": { "refId": "ul", "type": "htmlAam", "value": "ul", "linkText": "ul" }, "htmlLink": { "refId": "htmlLink", "type": "htmlAam", "value": "a", "linkText": "a (hyperlink)" }, "nav": { "refId": "nav", "type": "htmlAam", "value": "nav", "linkText": "nav" }, "region": { "refId": "region", "type": "aria", "value": "region", "linkText": "region" }, "aria-label": { "refId": "aria-label", "type": "aria", "value": "aria-label", "linkText": "aria-label" }, "aria-current": { "refId": "aria-current", "type": "aria", "value": "aria-current", "linkText": "aria-current" }, "aria-expanded": { "refId": "aria-expanded", "type": "aria", "value": "aria-expanded", "linkText": "aria-expanded" } },
      "horizontal-slider": { "author": { "refId": "author", "type": "metadata", "value": "Isabel Del Castillo", "linkText": "" }, "title": { "refId": "title", "type": "metadata", "value": "Color Viewer Slider", "linkText": "" }, "authorEmail": { "refId": "authorEmail", "type": "metadata", "value": "isa.delcastillo5@gmail.com", "linkText": "" }, "reference": { "refId": "reference", "type": "metadata", "value": "reference/2022-4-11_11511/slider-color-viewer.html", "linkText": "Test Case Page for Color Viewer Slider" }, "designPattern": { "refId": "designPattern", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/slider/", "linkText": "APG Pattern: Slider" }, "example": { "refId": "example", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/slider/examples/slider-color-viewer/", "linkText": "APG Example: Color Viewer Slider" }, "slider": { "refId": "slider", "type": "aria", "value": "slider", "linkText": "slider" }, "aria-labelledby": { "refId": "aria-labelledby", "type": "aria", "value": "aria-labelledby", "linkText": "aria-labelledby" }, "aria-valuenow": { "refId": "aria-valuenow", "type": "aria", "value": "aria-valuenow", "linkText": "aria-valuenow" }, "aria-valuemin": { "refId": "aria-valuemin", "type": "aria", "value": "aria-valuemin", "linkText": "aria-valuemin" }, "aria-valuemax": { "refId": "aria-valuemax", "type": "aria", "value": "aria-valuemax", "linkText": "aria-valuemax" }, "aria-orientation": { "refId": "aria-orientation", "type": "aria", "value": "aria-orientation", "linkText": "aria-orientation" } },
      "link-css": { "author": { "refId": "author", "type": "metadata", "value": "Isabel Del Castillo", "linkText": "" }, "authorEmail": { "refId": "authorEmail", "type": "metadata", "value": "isa.delcastillo5@gmail.com", "linkText": "" }, "title": { "refId": "title", "type": "metadata", "value": "Link Example 3 (CSS :before content property on a span element)", "linkText": "" }, "reference": { "refId": "reference", "type": "metadata", "value": "reference/2023-3-13_142620/link-css.html", "linkText": "Test Case Page for Link Example 3 (CSS :before content property on a span element)" }, "designPattern": { "refId": "designPattern", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/link/", "linkText": "APG Design Pattern" }, "example": { "refId": "example", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/link/examples/link/", "linkText": "APG Link Examples" }, "aria-label": { "refId": "aria-label", "type": "aria", "value": "aria-label", "linkText": "aria-label" }, "link": { "refId": "link", "type": "aria", "value": "link", "linkText": "link" } },
      "link-img-alt": { "author": { "refId": "author", "type": "metadata", "value": "Isabel Del Castillo", "linkText": "" }, "title": { "refId": "title", "type": "metadata", "value": "Link Example 2 (img element with alt attribute)", "linkText": "" }, "authorEmail": { "refId": "authorEmail", "type": "metadata", "value": "isa.delcastillo5@gmail.com", "linkText": "" }, "reference": { "refId": "reference", "type": "metadata", "value": "reference/2023-3-13_11377/link-img-alt.html", "linkText": "Test Case Page for Link Example 2 (img element with alt attribute)" }, "designPattern": { "refId": "designPattern", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/link/", "linkText": "APG Design Pattern" }, "example": { "refId": "example", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/link/examples/link/", "linkText": "APG Link Examples" }, "link": { "refId": "link", "type": "aria", "value": "link", "linkText": "link" } },
      "link-span-text": { "author": { "refId": "author", "type": "metadata", "value": "Isabel Del Castillo", "linkText": "" }, "title": { "refId": "title", "type": "metadata", "value": "Link Example 1 (span element with text content)", "linkText": "" }, "authorEmail": { "refId": "authorEmail", "type": "metadata", "value": "isa.delcastillo5@gmail.com", "linkText": "" }, "reference": { "refId": "reference", "type": "metadata", "value": "reference/2022-4-6_14258/link.html", "linkText": "Test Case Page for Link Example 1 (span element with text content)" }, "designPattern": { "refId": "designPattern", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/link/", "linkText": "APG Pattern: Link" }, "example": { "refId": "example", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/link/examples/link/", "linkText": "APG Example: Link" }, "link": { "refId": "link", "type": "aria", "value": "link", "linkText": "link" } },
      "menu-button-navigation": { "author": { "refId": "author", "type": "metadata", "value": "Isabel Del Castillo", "linkText": "" }, "authorEmail": { "refId": "authorEmail", "type": "metadata", "value": "isa.delcastillo5@gmail.com", "linkText": "" }, "title": { "refId": "title", "type": "metadata", "value": "Navigation Menu Button", "linkText": "" }, "reference": { "refId": "reference", "type": "metadata", "value": "reference/2024-8-12_123937/menu-button-links.html", "linkText": "Test Case Page for Navigation Menu Button" }, "designPattern": { "refId": "designPattern", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/menu-button/", "linkText": "APG Pattern: Menu Button" }, "example": { "refId": "example", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/menu-button/examples/menu-button-links/", "linkText": "APG Example: Actions Menu Button  Using" }, "menu": { "refId": "menu", "type": "aria", "value": "menu", "linkText": "menu" }, "menuitem": { "refId": "menuitem", "type": "aria", "value": "menuitem", "linkText": "menuitem" }, "aria-haspopup": { "refId": "aria-haspopup", "type": "aria", "value": "aria-haspopup", "linkText": "aria-haspopup" }, "aria-controls": { "refId": "aria-controls", "type": "aria", "value": "aria-controls", "linkText": "aria-controls" }, "aria-labelledby": { "refId": "aria-labelledby", "type": "aria", "value": "aria-labelledby", "linkText": "aria-labelledby" }, "aria-expanded": { "refId": "aria-expanded", "type": "aria", "value": "aria-expanded", "linkText": "aria-expanded" }, "aria-posinset": { "refId": "aria-posinset", "type": "aria", "value": "aria-posinset", "linkText": "aria-posinset" }, "aria-setsize": { "refId": "aria-setsize", "type": "aria", "value": "aria-setsize", "linkText": "aria-setsize" }, "button": { "refId": "button", "type": "htmlAam", "value": "button", "linkText": "button" } },
      "menu-button-actions": { "author": { "refId": "author", "type": "metadata", "value": "Isabel Del Castillo", "linkText": "" }, "authorEmail": { "refId": "authorEmail", "type": "metadata", "value": "isa.delcastillo5@gmail.com", "linkText": "" }, "title": { "refId": "title", "type": "metadata", "value": "Action Menu Button Example Using element.focus()", "linkText": "" }, "reference": { "refId": "reference", "type": "metadata", "value": "reference/2024-8-28_1295/menu-button-actions.html", "linkText": "Test Case Page for Action Menu Button Example Using element.focus()" }, "designPattern": { "refId": "designPattern", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/menu-button/", "linkText": "APG Pattern: Menu Button" }, "example": { "refId": "example", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/menu-button/examples/menu-button-actions-active-descendant/", "linkText": "APG Example: Actions Menu Button  Using element.focus()" }, "menu": { "refId": "menu", "type": "aria", "value": "menu", "linkText": "menu" }, "menuitem": { "refId": "menuitem", "type": "aria", "value": "menuitem", "linkText": "menuitem" }, "aria-haspopup": { "refId": "aria-haspopup", "type": "aria", "value": "aria-haspopup", "linkText": "aria-haspopup" }, "aria-controls": { "refId": "aria-controls", "type": "aria", "value": "aria-controls", "linkText": "aria-controls" }, "aria-labelledby": { "refId": "aria-labelledby", "type": "aria", "value": "aria-labelledby", "linkText": "aria-labelledby" }, "aria-expanded": { "refId": "aria-expanded", "type": "aria", "value": "aria-expanded", "linkText": "aria-expanded" }, "aria-posinset": { "refId": "aria-posinset", "type": "aria", "value": "aria-posinset", "linkText": "aria-posinset" }, "aria-setsize": { "refId": "aria-setsize", "type": "aria", "value": "aria-setsize", "linkText": "aria-setsize" }, "button": { "refId": "button", "type": "htmlAam", "value": "button", "linkText": "button" } },
      "menu-button-actions-active-descendant": { "author": { "refId": "author", "type": "metadata", "value": "Isabel Del Castillo", "linkText": "" }, "authorEmail": { "refId": "authorEmail", "type": "metadata", "value": "isa.delcastillo5@gmail.com", "linkText": "" }, "title": { "refId": "title", "type": "metadata", "value": "Action Menu Button Example Using aria-activedescendant", "linkText": "" }, "reference": { "refId": "reference", "type": "metadata", "value": "reference/2024-7-21_174946/menu-button-actions-active-descendant.html", "linkText": "Test Case Page for Action Menu Button Example Using aria-activedescendant" }, "designPattern": { "refId": "designPattern", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/menu-button/", "linkText": "APG Pattern: Menu Button" }, "example": { "refId": "example", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/menu-button/examples/menu-button-actions-active-descendant/", "linkText": "APG Example: Actions Menu Button  Using aria-activedescendant" }, "menu": { "refId": "menu", "type": "aria", "value": "menu", "linkText": "menu" }, "menuitem": { "refId": "menuitem", "type": "aria", "value": "menuitem", "linkText": "menuitem" }, "aria-haspopup": { "refId": "aria-haspopup", "type": "aria", "value": "aria-haspopup", "linkText": "aria-haspopup" }, "aria-controls": { "refId": "aria-controls", "type": "aria", "value": "aria-controls", "linkText": "aria-controls" }, "aria-activedescendant": { "refId": "aria-activedescendant", "type": "aria", "value": "aria-activedescendant", "linkText": "aria-activedescendant" }, "aria-labelledby": { "refId": "aria-labelledby", "type": "aria", "value": "aria-labelledby", "linkText": "aria-labelledby" }, "aria-expanded": { "refId": "aria-expanded", "type": "aria", "value": "aria-expanded", "linkText": "aria-expanded" }, "aria-posinset": { "refId": "aria-posinset", "type": "aria", "value": "aria-posinset", "linkText": "aria-posinset" }, "aria-setsize": { "refId": "aria-setsize", "type": "aria", "value": "aria-setsize", "linkText": "aria-setsize" }, "button": { "refId": "button", "type": "htmlAam", "value": "button", "linkText": "button" } },
      "radiogroup-aria-activedescendant": { "author": { "refId": "author", "type": "metadata", "value": "Isabel Del Castillo", "linkText": "" }, "authorEmail": { "refId": "authorEmail", "type": "metadata", "value": "isa.delcastillo5@gmail.com", "linkText": "" }, "title": { "refId": "title", "type": "metadata", "value": "Radio Group Example Using aria-activedescendant", "linkText": "" }, "reference": { "refId": "reference", "type": "metadata", "value": "reference/2022-4-7_113015/radio-activedescendant.html", "linkText": "Test Case Page for Radio Group Example Using aria-activedescendant" }, "designPattern": { "refId": "designPattern", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/radio/", "linkText": "APG Pattern: Radio Group" }, "example": { "refId": "example", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/radio/examples/radio-activedescendant/", "linkText": "APG Example: Radio Group  Using aria-activedescendant" }, "aria-activedescendant": { "refId": "aria-activedescendant", "type": "aria", "value": "aria-activedescendant", "linkText": "aria-activedescendant" }, "aria-checked": { "refId": "aria-checked", "type": "aria", "value": "aria-checked", "linkText": "aria-checked" }, "aria-labelledby": { "refId": "aria-labelledby", "type": "aria", "value": "aria-labelledby", "linkText": "aria-labelledby" }, "aria-posinset": { "refId": "aria-posinset", "type": "aria", "value": "aria-posinset", "linkText": "aria-posinset" }, "aria-setsize": { "refId": "aria-setsize", "type": "aria", "value": "aria-setsize", "linkText": "aria-setsize" }, "radio": { "refId": "radio", "type": "aria", "value": "radio", "linkText": "radio" }, "radiogroup": { "refId": "radiogroup", "type": "aria", "value": "radiogroup", "linkText": "radiogroup" }, "htmlLink": { "refId": "htmlLink", "type": "htmlAam", "value": "a", "linkText": "HTML hyperlink" } },
      "modal-dialog": { "author": { "refId": "author", "type": "metadata", "value": "James Scholes", "linkText": "" }, "authorEmail": { "refId": "authorEmail", "type": "metadata", "value": "james@pac.bz", "linkText": "" }, "title": { "refId": "title", "type": "metadata", "value": "Modal Dialog Example", "linkText": "" }, "reference": { "refId": "reference", "type": "metadata", "value": "reference/2022-4-7_15544/dialog.html", "linkText": "Test Case Page for Modal Dialog Example" }, "designPattern": { "refId": "designPattern", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/dialog-modal/", "linkText": "APG Pattern: Dialog (Modal)" }, "example": { "refId": "example", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/dialog-modal/examples/dialog/", "linkText": "APG Example: Modal Dialog" }, "dialog": { "refId": "dialog", "type": "aria", "value": "dialog", "linkText": "dialog" }, "aria-modal": { "refId": "aria-modal", "type": "aria", "value": "aria-modal", "linkText": "aria-modal" }, "aria-labelledby": { "refId": "aria-labelledby", "type": "aria", "value": "aria-labelledby", "linkText": "aria-labelledby" }, "aria-describedby": { "refId": "aria-describedby", "type": "aria", "value": "aria-describedby", "linkText": "aria-describedby" } },
      "radiogroup-roving-tabindex": { "author": { "refId": "author", "type": "metadata", "value": "Isabel Del Castillo", "linkText": "" }, "authorEmail": { "refId": "authorEmail", "type": "metadata", "value": "isa.delcastillo5@gmail.com", "linkText": "" }, "title": { "refId": "title", "type": "metadata", "value": "Radio Group Example Using Roving tabindex", "linkText": "" }, "reference": { "refId": "reference", "type": "metadata", "value": "reference/2021-3-15_144141/radio.html", "linkText": "Test Case Page for Radio Group Example Using Roving tabindex" }, "designPattern": { "refId": "designPattern", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/radio/", "linkText": "APG Pattern: Radio Group" }, "example": { "refId": "example", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/radio/examples/radio/", "linkText": "APG Example: Radio Group  Using Roving tabindex" }, "aria-checked": { "refId": "aria-checked", "type": "aria", "value": "aria-checked", "linkText": "aria-checked" }, "aria-labelledby": { "refId": "aria-labelledby", "type": "aria", "value": "aria-labelledby", "linkText": "aria-labelledby" }, "aria-posinset": { "refId": "aria-posinset", "type": "aria", "value": "aria-posinset", "linkText": "aria-posinset" }, "aria-setsize": { "refId": "aria-setsize", "type": "aria", "value": "aria-setsize", "linkText": "aria-setsize" }, "radio": { "refId": "radio", "type": "aria", "value": "radio", "linkText": "radio" }, "radiogroup": { "refId": "radiogroup", "type": "aria", "value": "radiogroup", "linkText": "radiogroup" }, "htmlLink": { "refId": "htmlLink", "type": "htmlAam", "value": "a", "linkText": "HTML hyperlink" } },
      "rating-radio-group": { "author": { "refId": "author", "type": "metadata", "value": "Isabel Del Castillo", "linkText": "" }, "authorEmail": { "refId": "authorEmail", "type": "metadata", "value": "isa.delcastillo5@gmail.com", "linkText": "" }, "title": { "refId": "title", "type": "metadata", "value": "Rating Radio Group", "linkText": "" }, "reference": { "refId": "reference", "type": "metadata", "value": "reference/2025-4-8_12716/radio-rating.html", "linkText": "Rating Radio Group Example" }, "designPattern": { "refId": "designPattern", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/radio/", "linkText": "APG Pattern: Radio Group" }, "example": { "refId": "example", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/radio/examples/radio-rating/", "linkText": "APG Example: Rating Radio Group" }, "aria-checked": { "refId": "aria-checked", "type": "aria", "value": "aria-checked", "linkText": "aria-checked" }, "aria-label": { "refId": "aria-label", "type": "aria", "value": "aria-label", "linkText": "aria-label" }, "aria-labelledby": { "refId": "aria-labelledby", "type": "aria", "value": "aria-labelledby", "linkText": "aria-labelledby" }, "aria-posinset": { "refId": "aria-posinset", "type": "aria", "value": "aria-posinset", "linkText": "aria-posinset" }, "aria-setsize": { "refId": "aria-setsize", "type": "aria", "value": "aria-setsize", "linkText": "aria-setsize" }, "radio": { "refId": "radio", "type": "aria", "value": "radio", "linkText": "radio" }, "radiogroup": { "refId": "radiogroup", "type": "aria", "value": "radiogroup", "linkText": "radiogroup" }, "link": { "refId": "link", "type": "htmlAam", "value": "link", "linkText": "link" } },
      "seek-slider": { "author": { "refId": "author", "type": "metadata", "value": "Isabel Del Castillo", "linkText": "" }, "title": { "refId": "title", "type": "metadata", "value": "Media Seek Slider", "linkText": "" }, "authorEmail": { "refId": "authorEmail", "type": "metadata", "value": "isa.delcastillo5@gmail.com", "linkText": "" }, "reference": { "refId": "reference", "type": "metadata", "value": "reference/2021-9-21_14462/slider-seek.html", "linkText": "Test Case Page for Media Seek Slider" }, "designPattern": { "refId": "designPattern", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/slider/", "linkText": "APG Pattern: Slider" }, "example": { "refId": "example", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/slider/examples/slider-seek/", "linkText": "APG Example: Media Seek Slider" }, "slider": { "refId": "slider", "type": "aria", "value": "slider", "linkText": "slider" }, "none": { "refId": "none", "type": "aria", "value": "none", "linkText": "none" }, "aria-labelledby": { "refId": "aria-labelledby", "type": "aria", "value": "aria-labelledby", "linkText": "aria-labelledby" }, "aria-orientation": { "refId": "aria-orientation", "type": "aria", "value": "aria-orientation", "linkText": "aria-orientation" }, "aria-valuenow": { "refId": "aria-valuenow", "type": "aria", "value": "aria-valuenow", "linkText": "aria-valuenow" }, "aria-valuemin": { "refId": "aria-valuemin", "type": "aria", "value": "aria-valuemin", "linkText": "aria-valuemin" }, "aria-valuemax": { "refId": "aria-valuemax", "type": "aria", "value": "aria-valuemax", "linkText": "aria-valuemax" }, "aria-valuetext": { "refId": "aria-valuetext", "type": "aria", "value": "aria-valuetext", "linkText": "aria-valuetext" }, "aria-hidden": { "refId": "aria-hidden", "type": "aria", "value": "aria-hidden", "linkText": "aria-hidden" } },
      "switch": { "author": { "refId": "author", "type": "metadata", "value": "Isabel Del Castillo", "linkText": "" }, "authorEmail": { "refId": "authorEmail", "type": "metadata", "value": "isa.delcastillo5@gmail.com", "linkText": "" }, "title": { "refId": "title", "type": "metadata", "value": "Switch Example", "linkText": "" }, "reference": { "refId": "reference", "type": "metadata", "value": "reference/2022-8-1_103716/switch.html", "linkText": "Test Case Page for Switch Example" }, "designPattern": { "refId": "designPattern", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/switch/", "linkText": "APG Pattern: Switch" }, "example": { "refId": "example", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/switch/examples/switch/", "linkText": "APG Example: Switch" }, "aria-checked": { "refId": "aria-checked", "type": "aria", "value": "aria-checked", "linkText": "aria-checked" }, "switch": { "refId": "switch", "type": "aria", "value": "switch", "linkText": "switch" } },
      "switch-button": { "author": { "refId": "author", "type": "metadata", "value": "Isabel Del Castillo", "linkText": "" }, "authorEmail": { "refId": "authorEmail", "type": "metadata", "value": "isa.delcastillo5@gmail.com", "linkText": "" }, "title": { "refId": "title", "type": "metadata", "value": "Switch Example Using HTML Button", "linkText": "" }, "reference": { "refId": "reference", "type": "metadata", "value": "reference/2025-8-22_17848/switch-button.html", "linkText": "Test Case Page for Switch Example" }, "designPattern": { "refId": "designPattern", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/switch/", "linkText": "APG Pattern: Switch" }, "example": { "refId": "example", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/switch/examples/switch-button/", "linkText": "APG Example: Switch Using HTML Button" }, "aria-checked": { "refId": "aria-checked", "type": "aria", "value": "aria-checked", "linkText": "aria-checked" }, "switch": { "refId": "switch", "type": "aria", "value": "switch", "linkText": "switch" }, "button": { "refId": "button", "type": "htmlAam", "value": "button", "linkText": "button" } },
      "tabs-automatic-activation": { "author": { "refId": "author", "type": "metadata", "value": "Isabel Del Castillo", "linkText": "" }, "authorEmail": { "refId": "authorEmail", "type": "metadata", "value": "isa.delcastillo5@gmail.com", "linkText": "" }, "title": { "refId": "title", "type": "metadata", "value": "Tabs with Automatic Activation", "linkText": "" }, "reference": { "refId": "reference", "type": "metadata", "value": "reference/2025-6-5_142619/tabs-automatic.html", "linkText": "Tabs with Automatic Activation" }, "designPattern": { "refId": "designPattern", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/tabs/", "linkText": "Tabs Pattern" }, "example": { "refId": "example", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/tabs/examples/tabs-automatic/", "linkText": "Example of Tabs with Automatic Activation" }, "aria-labelledby": { "refId": "aria-labelledby", "type": "aria", "value": "aria-labelledby", "linkText": "aria-labelledby" }, "aria-posinset": { "refId": "aria-posinset", "type": "aria", "value": "aria-posinset", "linkText": "aria-posinset" }, "aria-selected": { "refId": "aria-selected", "type": "aria", "value": "aria-selected", "linkText": "aria-selected" }, "aria-setsize": { "refId": "aria-setsize", "type": "aria", "value": "aria-setsize", "linkText": "aria-setsize" }, "tab": { "refId": "tab", "type": "aria", "value": "tab", "linkText": "tab" }, "tablist": { "refId": "tablist", "type": "aria", "value": "tablist", "linkText": "tablist" }, "tabpanel": { "refId": "tabpanel", "type": "aria", "value": "tabpanel", "linkText": "tabpanel" }, "htmlButton": { "refId": "htmlButton", "type": "htmlAam", "value": "button", "linkText": "HTML button" }, "htmlParagraph": { "refId": "htmlParagraph", "type": "htmlAam", "value": "p", "linkText": "HTML paragraph" } },
      "switch-checkbox": { "author": { "refId": "author", "type": "metadata", "value": "Isabel Del Castillo", "linkText": "" }, "authorEmail": { "refId": "authorEmail", "type": "metadata", "value": "isa.delcastillo5@gmail.com", "linkText": "" }, "title": { "refId": "title", "type": "metadata", "value": "Switch Example Using HTML Checkbox Input", "linkText": "" }, "reference": { "refId": "reference", "type": "metadata", "value": "reference/2025-8-25_124251/switch-checkbox.html", "linkText": "Test Case Page for Switch Example" }, "designPattern": { "refId": "designPattern", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/switch/", "linkText": "APG Pattern: Switch" }, "example": { "refId": "example", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/switch/examples/switch-checkbox/", "linkText": "APG Example: Switch Using HTML Checkbox Input" }, "switch": { "refId": "switch", "type": "aria", "value": "switch", "linkText": "switch" }, "inputTypeCheckbox": { "refId": "inputTypeCheckbox", "type": "htmlAam", "value": "inputTypeCheckbox", "linkText": "inputTypeCheckbox" }, "label": { "refId": "label", "type": "htmlAam", "value": "label", "linkText": "HTML label" }, "@checked": { "refId": "@checked", "type": "htmlAam", "value": "@checked", "linkText": "@checked" } },
      "tabs-manual-activation": { "author": { "refId": "author", "type": "metadata", "value": "Isabel Del Castillo", "linkText": "" }, "authorEmail": { "refId": "authorEmail", "type": "metadata", "value": "isa.delcastillo5@gmail.com", "linkText": "" }, "title": { "refId": "title", "type": "metadata", "value": "Tabs with Manual Activation", "linkText": "" }, "reference": { "refId": "reference", "type": "metadata", "value": "reference/2025-8-28_13240/tabs-manual.html", "linkText": "Tabs with Automatic Activation" }, "designPattern": { "refId": "designPattern", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/tabs/", "linkText": "Tabs Pattern" }, "example": { "refId": "example", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/tabs/examples/tabs-manual/", "linkText": "Example of Tabs with Manual Activation" }, "aria-labelledby": { "refId": "aria-labelledby", "type": "aria", "value": "aria-labelledby", "linkText": "aria-labelledby" }, "aria-posinset": { "refId": "aria-posinset", "type": "aria", "value": "aria-posinset", "linkText": "aria-posinset" }, "aria-selected": { "refId": "aria-selected", "type": "aria", "value": "aria-selected", "linkText": "aria-selected" }, "aria-setsize": { "refId": "aria-setsize", "type": "aria", "value": "aria-setsize", "linkText": "aria-setsize" }, "tab": { "refId": "tab", "type": "aria", "value": "tab", "linkText": "tab" }, "tablist": { "refId": "tablist", "type": "aria", "value": "tablist", "linkText": "tablist" }, "tabpanel": { "refId": "tabpanel", "type": "aria", "value": "tabpanel", "linkText": "tabpanel" }, "htmlButton": { "refId": "htmlButton", "type": "htmlAam", "value": "button", "linkText": "HTML button" }, "htmlLink": { "refId": "htmlLink", "type": "htmlAam", "value": "a", "linkText": "HTML hyperlink" }, "htmlParagraph": { "refId": "htmlParagraph", "type": "htmlAam", "value": "p", "linkText": "HTML paragraph" } },
      "toggle-button": { "author": { "refId": "author", "type": "metadata", "value": "Isabel Del Castillo", "linkText": "" }, "authorEmail": { "refId": "authorEmail", "type": "metadata", "value": "isa.delcastillo5@gmail.com", "linkText": "" }, "title": { "refId": "title", "type": "metadata", "value": "Toggle Button", "linkText": "" }, "reference": { "refId": "reference", "type": "metadata", "value": "reference/2022-4-8_135651/button.html", "linkText": "Test Case Page for Toggle Button" }, "designPattern": { "refId": "designPattern", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/button/", "linkText": "APG Pattern: Button" }, "example": { "refId": "example", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/button/examples/button/", "linkText": "APG Example: Button" }, "button": { "refId": "button", "type": "htmlAam", "value": "button", "linkText": "button" }, "aria-pressed": { "refId": "aria-pressed", "type": "aria", "value": "aria-pressed", "linkText": "aria-pressed" } },
      "vertical-temperature-slider": { "author": { "refId": "author", "type": "metadata", "value": "Isabel Del Castillo", "linkText": "" }, "title": { "refId": "title", "type": "metadata", "value": "Vertical Temperature Slider", "linkText": "" }, "authorEmail": { "refId": "authorEmail", "type": "metadata", "value": "isa.delcastillo5@gmail.com", "linkText": "" }, "reference": { "refId": "reference", "type": "metadata", "value": "reference/2025-7-15_112752/slider-temperature.html", "linkText": "Test Case Page for Vertical Temperature Slider" }, "designPattern": { "refId": "designPattern", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/slider/", "linkText": "APG Pattern: Slider" }, "example": { "refId": "example", "type": "metadata", "value": "https://www.w3.org/WAI/ARIA/apg/patterns/slider/examples/slider-temperature/", "linkText": "APG Example: Vertical Temperature Slider" }, "slider": { "refId": "slider", "type": "aria", "value": "slider", "linkText": "slider" }, "none": { "refId": "none", "type": "aria", "value": "none", "linkText": "none" }, "aria-labelledby": { "refId": "aria-labelledby", "type": "aria", "value": "aria-labelledby", "linkText": "aria-labelledby" }, "aria-orientation": { "refId": "aria-orientation", "type": "aria", "value": "aria-orientation", "linkText": "aria-orientation" }, "aria-valuenow": { "refId": "aria-valuenow", "type": "aria", "value": "aria-valuenow", "linkText": "aria-valuenow" }, "aria-valuemin": { "refId": "aria-valuemin", "type": "aria", "value": "aria-valuemin", "linkText": "aria-valuemin" }, "aria-valuemax": { "refId": "aria-valuemax", "type": "aria", "value": "aria-valuemax", "linkText": "aria-valuemax" }, "aria-valuetext": { "refId": "aria-valuetext", "type": "aria", "value": "aria-valuetext", "linkText": "aria-valuetext" }, "aria-hidden": { "refId": "aria-hidden", "type": "aria", "value": "aria-hidden", "linkText": "aria-hidden" } },
      /* eslint-enable */
    };

    return queryInterface.sequelize.transaction(async transaction => {
      const testPlanVersions = await queryInterface.sequelize.query(
        `SELECT id, directory, tests FROM "TestPlanVersion"
         WHERE metadata->>'testFormatVersion' = '2'`,
        {
          type: Sequelize.QueryTypes.SELECT,
          transaction
        }
      );

      for (const testPlanVersion of testPlanVersions) {
        const { id, directory, tests } = testPlanVersion;

        if (!directory || !tests || !Array.isArray(tests)) {
          continue;
        }

        const directoryReferences = references[directory];
        if (!directoryReferences) {
          continue;
        }

        let modified = false;

        const updatedTests = tests.map(test => {
          if (
            !test.renderableContent ||
            !test.renderableContent.info ||
            !test.renderableContent.info.references ||
            !Array.isArray(test.renderableContent.info.references)
          ) {
            return test;
          }

          const updatedReferences = test.renderableContent.info.references.map(
            ref => {
              if (directoryReferences[ref.refId]) {
                const replacementRef = directoryReferences[ref.refId];
                modified = true;
                return {
                  ...ref,
                  linkText: replacementRef.linkText,
                  value: replacementRef.value
                };
              }
              return ref;
            }
          );

          return {
            ...test,
            renderableContent: {
              ...test.renderableContent,
              info: {
                ...test.renderableContent.info,
                references: updatedReferences
              }
            }
          };
        });

        if (modified) {
          await queryInterface.sequelize.query(
            `UPDATE "TestPlanVersion" SET "tests" = ? WHERE id = ?`,
            {
              replacements: [JSON.stringify(updatedTests), id],
              transaction
            }
          );
        }
      }

      await dumpTable('TestPlanVersion');
      await regenerateResultsAndRecalculateHashes(queryInterface, transaction, {
        testPlanVersionWhere: `WHERE metadata->>'testFormatVersion' = '2'`,
        pruneOldVersions: false
      });
    });
  },

  async down() {
    // This migration cannot be reversed as we don't have the original values; use the dumped TestPlanVersion table
  }
};
